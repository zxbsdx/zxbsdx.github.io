import{_,f as d,g as h,c as r,b as t,h as u,v as c,t as l,j as S,F as f,k as b,o as i}from"./index-B3w_f1rl.js";const M={class:"message-board"},k={class:"post-form"},x={class:"form-group"},w={class:"form-group"},y={class:"word-count"},$=["disabled"],B={class:"message-list"},D={class:"list-title"},I={key:0,class:"empty-tip"},N={class:"msg-header"},C={class:"msg-username"},O={class:"msg-time"},V={class:"msg-content"},q=["onClick"],F={__name:"Messages",setup(J){const s=d({username:"",content:"",id:"",time:""}),n=d([]);h(()=>{const a=localStorage.getItem("messageBoard");a&&(n.value=JSON.parse(a))});const m=a=>{const e=new Date(a);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`},g=()=>{const a=Date.now()+Math.floor(Math.random()*1e3),e={...s.value,id:a,time:new Date().toISOString()};n.value.unshift(e),localStorage.setItem("messageBoard",JSON.stringify(n.value)),s.value={username:"",content:"",id:"",time:""},alert("留言发布成功！")},p=a=>{confirm("确定要删除这条留言吗？")&&(n.value.splice(a,1),localStorage.setItem("messageBoard",JSON.stringify(n.value)))};return(a,e)=>(i(),r("div",M,[e[5]||(e[5]=t("header",{class:"board-header"},[t("h1",null,"留言板"),t("p",{class:"subtitle"},"留下你想对自己说的话吧,留言仅自己可见～")],-1)),t("section",k,[t("div",x,[e[2]||(e[2]=t("label",{for:"username"},"昵称",-1)),u(t("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=o=>s.value.username=o),placeholder:"请输入你的昵称",required:"",maxlength:"16"},null,512),[[c,s.value.username]])]),t("div",w,[e[3]||(e[3]=t("label",{for:"content"},"留言内容",-1)),u(t("textarea",{id:"content","onUpdate:modelValue":e[1]||(e[1]=o=>s.value.content=o),placeholder:"请输入留言内容（支持简单换行）",required:"",maxlength:"200",rows:"4"},null,512),[[c,s.value.content]]),t("p",y,l(s.value.content.length)+"/200",1)]),t("button",{class:"submit-btn",onClick:g,disabled:!s.value.username||!s.value.content.trim()}," 发布留言 ",8,$)]),t("section",B,[t("h2",D,"最新留言（"+l(n.value.length)+"）",1),n.value.length===0?(i(),r("div",I,e[4]||(e[4]=[t("i",{class:"icon"},null,-1),t("p",null,"暂无留言，快来发布第一条留言吧～",-1)]))):S("",!0),(i(!0),r(f,null,b(n.value,(o,v)=>(i(),r("div",{class:"message-item",key:o.id},[t("div",N,[t("span",C,l(o.username),1),t("span",O,l(m(o.time)),1)]),t("div",V,l(o.content),1),t("button",{class:"delete-btn",onClick:T=>p(v),title:"删除留言"}," 删除 ",8,q)]))),128))])]))}},j=_(F,[["__scopeId","data-v-5e07623d"]]);export{j as default};
